<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P2P Token Trading</title>
</head>
<body>
    <h1>P2P Token Trading Platform</h1>

    <button onclick="connectWallet()">Connect Wallet</button>

    <h2>Create Offer</h2>
    <input id="tokenOffered" placeholder="Token Offered Address"><br>
    <input id="amountOffered" placeholder="Amount Offered"><br>
    <input id="tokenRequested" placeholder="Token Requested Address"><br>
    <input id="amountRequested" placeholder="Amount Requested"><br>
    <button onclick="createOffer()">Create Offer</button>

    <h2>Accept Offer</h2>
    <input id="offerIdAccept" placeholder="Offer ID"><br>
    <button onclick="acceptOffer()">Accept Offer</button>

    <h2>Expire Offer</h2>
    <input id="offerIdExpire" placeholder="Offer ID"><br>
    <button onclick="expireOffer()">Expire Offer</button>

    <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
    <script>
        let provider, signer, contract;

        const CONTRACT_ADDRESS = "0x50592D36c50C1A3fc4D487977a5104B008dd94A9";
        const CONTRACT_ABI = [ /* ABI goes here */ ];

        async function connectWallet() {
            provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();
            contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
            alert("Wallet Connected");
        }

        async function createOffer() {
            const tokenOffered = document.getElementById('tokenOffered').value;
            const amountOffered = ethers.utils.parseUnits(document.getElementById('amountOffered').value, 18);
            const tokenRequested = document.getElementById('tokenRequested').value;
            const amountRequested = ethers.utils.parseUnits(document.getElementById('amountRequested').value, 18);

            const tx = await contract.createOffer(tokenOffered, amountOffered, tokenRequested, amountRequested);
            await tx.wait();
            alert("Offer Created!");
        }

        async function acceptOffer() {
            const offerId = document.getElementById('offerIdAccept').value;
            const tx = await contract.acceptOffer(offerId);
            await tx.wait();
            alert("Offer Accepted!");
        }

        async function expireOffer() {
            const offerId = document.getElementById('offerIdExpire').value;
            const tx = await contract.expireOffer(offerId);
            await tx.wait();
            alert("Offer Expired!");
        }
    </script>
</body>
</html>
